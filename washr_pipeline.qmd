---
title: "washr_pipeline"
format: html
---

```{r}
library(washr)
setup_rawdata()
```

```{r}
source(here::here("data-raw", "odata_utils.R"))
```

```{r}
base_url <- "https://xmart-api-public.who.int/WASHMART/GLAAS_EN_2?$format=csv"
out_file <- here::here("data-raw", "glaas_2021.csv")

# Run the fetch_csv_r function
fetch_odata(base_url, filter = list(Time = c(2021), Ind = c("ABSORB_DOM")), top=20, skip=20, out_file = out_file)
fetch_odata(base_url, out_file = out_file)
```

Clean data following data-raw/data_processing.R

```{r}
setup_dictionary()
```

Complete data-raw/dictionary.csv